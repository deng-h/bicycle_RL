import pybullet as p


def create_obstacle(client_id):
    """
    创建一个或多个障碍物。

    参数:
        client_id: PyBullet 客户端 ID
        obstacle_positions: 障碍物位置列表，每个位置是一个列表 [x, y, z]

    返回:
        障碍物的 bodyId 列表
    """

    # 定义不同的障碍物位置列表
    obstacle_positions = [
        [8 + 0.5, 5 + 0.5, 1],
        [8 + 0.5, 6 + 0.5, 1],
        [8 + 0.5, 7 + 0.5, 1],
        [8 + 0.5, 8 + 0.5, 1],
        [8 + 0.5, 9 + 0.5, 1],
        [8 + 0.5, 10 + 0.5, 1],
        [8 + 0.5, 11 + 0.5, 1],
        [8 + 0.5, 12 + 0.5, 1],
        [9 + 0.5, 12 + 0.5, 1],
        [10 + 0.5, 12 + 0.5, 1],
        [11 + 0.5, 12 + 0.5, 1],
        [12 + 0.5, 12 + 0.5, 1],
        [13 + 0.5, 12 + 0.5, 1],
        [14 + 0.5, 12 + 0.5, 1],
        [14 + 0.5, 13 + 0.5, 1],
        [14 + 0.5, 14 + 0.5, 1],
        [14 + 0.5, 15 + 0.5, 1],
        [14 + 0.5, 16 + 0.5, 1],
        [14 + 0.5, 17 + 0.5, 1],
        [14 + 0.5, 18 + 0.5, 1],
        [14 + 0.5, 19 + 0.5, 1],
        [14 + 0.5, 20 + 0.5, 1],
        [14 + 0.5, 21 + 0.5, 1],
        [14 + 0.5, 22 + 0.5, 1],
        [13 + 0.5, 22 + 0.5, 1],
        [12 + 0.5, 22 + 0.5, 1],
        [11 + 0.5, 22 + 0.5, 1],
        [10 + 0.5, 22 + 0.5, 1],
        [9 + 0.5, 22 + 0.5, 1],
        [8 + 0.5, 22 + 0.5, 1],
        [8 + 0.5, 23 + 0.5, 1],
        [8 + 0.5, 24 + 0.5, 1],
        [8 + 0.5, 25 + 0.5, 1],
        [8 + 0.5, 26 + 0.5, 1],
        [7 + 0.5, 26 + 0.5, 1],
        [6 + 0.5, 26 + 0.5, 1],
        [5 + 0.5, 26 + 0.5, 1],

        [0 + 0.5, 15 + 0.5, 1],
        [1 + 0.5, 15 + 0.5, 1],
        [2 + 0.5, 15 + 0.5, 1],
        [3 + 0.5, 15 + 0.5, 1],

        [16 + 0.5, 6 + 0.5, 1],
        [16 + 0.5, 7 + 0.5, 1],
        [17 + 0.5, 6 + 0.5, 1],
        [17 + 0.5, 7 + 0.5, 1],

        [25 + 0.5, 3 + 0.5, 1],
        [25 + 0.5, 4 + 0.5, 1],
        [26 + 0.5, 3 + 0.5, 1],
        [26 + 0.5, 4 + 0.5, 1],

        [18 + 0.5, 26 + 0.5, 1],
        [18 + 0.5, 27 + 0.5, 1],
        [19 + 0.5, 26 + 0.5, 1],
        [19 + 0.5, 27 + 0.5, 1],

        [23 + 0.5, 10 + 0.5, 1],
        [24 + 0.5, 10 + 0.5, 1],
        [25 + 0.5, 10 + 0.5, 1],
        [22 + 0.5, 10 + 0.5, 1],
        [22 + 0.5, 11 + 0.5, 1],
        [22 + 0.5, 12 + 0.5, 1],
        [22 + 0.5, 13 + 0.5, 1],
        [22 + 0.5, 14 + 0.5, 1],
        [22 + 0.5, 15 + 0.5, 1],
        [22 + 0.5, 16 + 0.5, 1],
        [22 + 0.5, 17 + 0.5, 1],
        [22 + 0.5, 18 + 0.5, 1],
        [22 + 0.5, 19 + 0.5, 1],
        [22 + 0.5, 20 + 0.5, 1],
        [22 + 0.5, 21 + 0.5, 1],
        [22 + 0.5, 22 + 0.5, 1],
        [22 + 0.5, 23 + 0.5, 1],
        [23 + 0.5, 23 + 0.5, 1],
        [24 + 0.5, 23 + 0.5, 1],
        [25 + 0.5, 23 + 0.5, 1],
    ]

    collision_shape = p.createCollisionShape(p.GEOM_BOX, halfExtents=[0.5, 0.5, 1.0])
    visual_shape = p.createVisualShape(p.GEOM_BOX, halfExtents=[0.5, 0.5, 1.0], rgbaColor=[0.92, 0.94, 0.94, 1])
    obstacle_ids = []
    for obstacle_pos in obstacle_positions:
        obstacle_id = p.createMultiBody(baseCollisionShapeIndex=collision_shape,
                                            baseVisualShapeIndex=visual_shape,
                                            basePosition=obstacle_pos,
                                            physicsClientId=client_id)
        obstacle_ids.append(obstacle_id)
    return obstacle_ids
